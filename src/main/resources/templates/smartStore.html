<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="common/layout :: head"/>

<body>
    <div th:replace="common/layout :: navbar"/>

    <div class="container" style="margin-top: -30px">

        <div class="row" style="margin-bottom: 100px;">
            <img src="/image/iphone-banner.jpg" class="img-responsive" />
        </div>

        <div class="row" style="width: 90%; margin: 0 auto; margin-bottom: 100px;">
            <div class="col-xs-3">
                <h3><label for="category">Category</label></h3>
                <div class="list-group" id="category">
                    <a th:href="@{/smartStore(category='all')}" th:classappend="${activeAll}? 'active'" class="list-group-item">All</a>
                    <a th:href="@{/searchByCategory(category='Management')}" th:classappend="${activeManagement}? 'active'" class="list-group-item">Management</a>
                    <a th:href="@{/searchByCategory(category='Fiction')}" th:classappend="${activeFiction}? 'active'" class="list-group-item">Fiction</a>
                    <a th:href="@{/searchByCategory(category='Bussiness')}" th:classappend="${activeBussiness}? 'active'" class="list-group-item">Bussiness</a>
                    <a th:href="@{/searchByCategory(category='Novel')}" th:classappend="${activeNovel}? 'active'" class="list-group-item">Novel</a>
                    <a th:href="@{/searchByCategory(category='Entertainment')}" th:classappend="${activeEntertainment}? 'active'" class="list-group-item">Entertainment</a>
                    <a th:href="@{/searchByCategory(category='Engineering')}" th:classappend="${activeEngineering}? 'active'" class="list-group-item">Engineering</a>
                    <a th:href="@{/searchByCategory(category='Programming')}" th:classappend="${activeProgramming}? 'active'" class="list-group-item">Programming</a>
                    <a th:href="@{/searchByCategory(category='Art &amp; Literature')}" th:classappend="${activeArtsLiterature}? 'active'" class="list-group-item">Art &amp; Literature</a>
                </div>
            </div>
            <div class="col-xs-9">
                <div th:if="${emptyList}">
                    <h5 style="font-style: italic">Oops, no result is found. Try something else or try again later!</h5>
                </div>

                <table border="0" id="bookList">
                    <thead>
                        <tr>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="book-item" data-th-each="book : ${bookList}">
                            <td>
                                <div th:if="${book != null}">
                                    <div class="row" style="margin-bottom: 50px;">
                                        <div class="col-xs-3">
                                            <a th:href="@{/bookDetail?id=}+${book.id}"><img th:src="@{/image/book/}+${book.id}+'.png'" alt="" class="img-responsive shelf-book"/></a>
                                        </div>
                                        <div class="col-xs-9">
                                            <a th:href="@{/bookDetail?id=}+${book.id}"><h4 th:text="${book.title}" style="display: inline;"></h4></a>
                                            <small th:text="${book.publicationDate}"></small> <br/>
                                            by <i><span th:text="${book.author}"></span></i> <br/>
                                            <a th:href="@{/bookDetail?id=}+${book.id}"><span style="font-size: x-large; color: #db3208;">$<span th:text="${#numbers.formatDecimal(book.ourPrice, 0, 'COMMA', 2, 'POINT')}"></span></span></a>
                                            <span style="text-decoration: line-through">$<span th:text="${#numbers.formatDecimal(book.listPrice, 0, 'COMMA', 2, 'POINT')}"></span></span>
                                            <p th:utext="${#strings.abbreviate(book.description, 2000)}"></p>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div> <!-- End of container -->

    <div th:replace="common/layout :: footer"/>

    <div th:replace="common/layout :: body-bottom-scripts"/>
    <script>
        $(document).ready(function () {
            $('#bookList').DataTable({
                "lengthMenu":[[5,10,15,20,-1],[5,10,15,20,"All"]],
                "ordering": false,
                stateSave: true
            });

            $('#bookList').on('page.dt', function () {
                $('html, body').animate({
                   scrollTop: $('#bookList').offset().top
                }, 200);
            })
        })
    </script>
</body>
</html>
